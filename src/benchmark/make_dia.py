import matplotlib.pyplot as plt

num_records_list = [5000, 10000, 15000, 20000, 25000, 30000, 35000, 40000, 45000, 50000, 55000, 60000, 65000, 70000,
                    75000, 80000, 85000, 90000, 95000]
times_with_index = [0.0003418838977813721, 0.0004841499328613282, 0.0003850553035736084, 0.0016954779624938966,
                    0.0019573163986206055, 0.002986011505126953, 0.003747844696044922, 0.006071033477783203,
                    0.007158238887786866, 0.008206114768981934, 0.010356111526489258, 0.010749077796936036,
                    0.013069257736206055, 0.014413161277770996, 0.015415911674499511, 0.01721338987350464,
                    0.020411763191223144, 0.02141361951828003, 0.022070162296295166]

times_without_index = [0.0009095168113708496, 0.0012042975425720214, 0.0014546561241149903, 0.001710944175720215,
                       0.00191817045211792, 0.003883345127105713, 0.0045993876457214354, 0.005354211330413818,
                       0.006532816886901855, 0.007656867504119873, 0.009762988090515137, 0.01133944034576416,
                       0.0160239052772522, 0.01829941749572754, 0.020364196300506593, 0.027030785083770752,
                       0.03166638135910034, 0.03692849159240723, 0.037669530868530275]

print('\t\\hline')
for a, b, c in zip(num_records_list, times_with_index, times_without_index):
    print(f'\t{a} & {round(b, 3)} & {round(c, 3)} \\\\')
    print('\t\\hline')


plt.plot(num_records_list, times_with_index, label='С индексом', marker='o')
plt.plot(num_records_list, times_without_index, label='Без индекса', marker='o')
plt.xlabel('Количество записей в БД')
plt.ylabel('Время выполнения запроса (секунды)')
plt.title('Зависимость времени выполнения SQL запроса от количества записей в БД')
plt.legend()
plt.grid(True)
plt.show()
